<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | Starter</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">


<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <div class="content-header">
      <div class="container-fluid">
          <div class="row mb-2">
              <div class="col-sm-12">
                  <h1 class="m-0">Listado de Categorías
                      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-create">
                         <i class="fa fa-plus"></i> Agregar Nuevo
                      </button>
                  </h1>
              </div><!-- /.col -->
          </div><!-- /.row -->
      </div><!-- /.container-fluid -->
  </div>
  <!-- /.content-header -->

  <!-- Main content -->
  <div class="content">
      <div class="container-fluid">
          <div class="row">
              <div class="col-md-6">
                  <div class="card card-outline card-primary">
                      <div class="card-header">
                          <h3 class="card-title">Categorías registrados</h3>
                          <div class="card-tools">
                              <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                              </button>
                          </div>
                      </div>

                      <div class="card-body" style="display: block;">
                          <table id="example1" class="table table-bordered table-striped">
                              <thead>
                              <tr>
                                  <th><center>Nro</center></th>
                                  <th><center>Nombre de la categoría</center></th>
                                  <th><center>Acciones</center></th>
                              </tr>
                              </thead>
                              <tbody>
                                  <tr>
                                      <td><center>1</center></td>
                                      <td>Categoría 1</td>
                                      <td>
                                          <center>
                                              <div class="btn-group">
                                                  <button type="button" class="btn btn-success" data-toggle="modal"
                                                          data-target="#modal-update1">
                                                      <i class="fa fa-pencil-alt"></i> Editar
                                                  </button>
                                                  <!-- modal para actualizar categorías -->
                                                  <div class="modal fade" id="modal-update1">
                                                      <div class="modal-dialog">
                                                          <div class="modal-content">
                                                              <div class="modal-header" style="background-color: #116f4a;color: white">
                                                                  <h4 class="modal-title">Actualización de la categoría</h4>
                                                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                      <span aria-hidden="true">&times;</span>
                                                                  </button>
                                                              </div>
                                                              <div class="modal-body">
                                                                  <div class="row">
                                                                      <div class="col-md-12">
                                                                          <div class="form-group">
                                                                              <label for="">Nombre de la categoría</label>
                                                                              <input type="text" id="nombre_categoria1" value="Categoría 1" class="form-control">
                                                                              <small style="color: red;display: none" id="lbl_update1">* Este campo es requerido</small>
                                                                          </div>
                                                                      </div>
                                                                  </div>
                                                              </div>
                                                              <div class="modal-footer justify-content-between">
                                                                  <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                                                                  <button type="button" class="btn btn-success" id="btn_update1">Actualizar</button>
                                                              </div>
                                                          </div>
                                                          <!-- /.modal-content -->
                                                      </div>
                                                      <!-- /.modal-dialog -->
                                                  </div>
                                                  <!-- /.modal -->
                                                  <script>
                                                      $('#btn_update1').click(function () {

                                                          var nombre_categoria = $('#nombre_categoria1').val();
                                                          var id_categoria = '1';

                                                          if(nombre_categoria == ""){
                                                              $('#nombre_categoria1').focus();
                                                              $('#lbl_update1').css('display','block');
                                                          }else {
                                                              var url = "../app/controllers/categorias/update_de_categorias.php";
                                                              $.get(url,{nombre_categoria:nombre_categoria,id_categoria:id_categoria},function (datos) {
                                                                  $('#respuesta_update1').html(datos);
                                                              });
                                                          }
                                                      });
                                                  </script>
                                                  <div id="respuesta_update1"></div>
                                              </div>
                                          </center>
                                      </td>
                                  </tr>
                                  <!-- Agrega más filas si es necesario -->
                              </tbody>
                          </table>
                      </div>
                  </div>
              </div>
          </div>
          <!-- /.row -->
      </div><!-- /.container-fluid -->
  </div>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->

<!-- modal para registrar categorías -->
<div class="modal fade" id="modal-create">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header" style="background-color: #1d36b6;color: white">
              <h4 class="modal-title">Creación de una nueva categoría</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <div class="row">
                  <div class="col-md-12">
                      <div class="form-group">
                          <label for="">Nombre de la categoría <b>*</b></label>
                          <input type="text" id="nombre_categoria" class="form-control">
                          <small style="color: red;display: none" id="lbl_create">* Este campo es requerido</small>
                      </div>
                  </div>
              </div>
          </div>
          <div class="modal-footer justify-content-between">
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
              <button type="button" class="btn btn-primary" id="btn_create">Guardar categoría</button>
          </div>
      </div>
      <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<script>
  $('#btn_create').click(function () {
     // alert("guardar");
      var nombre_categoria = $('#nombre_categoria').val();

      if(nombre_categoria == ""){
          $('#nombre_categoria').focus();
          $('#lbl_create').css('display','block');
      }else{
          var url = "../app/controllers/categorias/registro_de_categorias.php";
          $.get(url,{nombre_categoria:nombre_categoria},function (datos) {
              $('#respuesta').html(datos);
          });
      }
  });
</script>
<div id="respuesta"></div>



<script>
  $(function () {
      $("#example1").DataTable({
          "pageLength": 5,
          "language": {
              "emptyTable": "No hay información",
              "info": "Mostrando _START_ a _END_ de _TOTAL_ Categorías",
              "infoEmpty": "Mostrando 0 a 0 de 0 Categorías",
              "infoFiltered": "(Filtrado de _MAX_ total Categorías)",
              "infoPostFix": "",
              "thousands": ",",
              "lengthMenu": "Mostrar _MENU_ Categorías",
              "loadingRecords": "Cargando...",
              "processing": "Procesando...",
              "search": "Buscador:",
              "zeroRecords": "Sin resultados encontrados",
              "paginate": {
                  "first": "Primero",
                  "last": "Ultimo",
                  "next": "Siguiente",
                  "previous": "Anterior"
              }
          },
          "responsive": true, "lengthChange": true, "autoWidth": false,
          buttons: [{
              extend: 'collection',
              text: 'Reportes',
              orientation: 'landscape',
              buttons: [{
                  text: 'Copiar',
                  extend: 'copy',
              }, {
                  extend: 'pdf'
              },{
                  extend: 'csv'
              },{
                  extend: 'excel'
              },{
                  text: 'Imprimir',
                  extend: 'print'
              }
              ]
          },
              {
                  extend: 'colvis',
                  text: 'Visor de columnas',
                  collectionLayout: 'fixed three-column'
              }
          ],
      }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
  });
</script>





<!-- modal para registrar categorias -->
<div class="modal fade" id="modal-create">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header" style="background-color: #1d36b6;color: white">
              <h4 class="modal-title">Creación de una nueva categoría</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <div class="row">
                  <div class="col-md-12">
                      <div class="form-group">
                          <label for="">Nombre de la categoría <b>*</b></label>
                          <input type="text" id="nombre_categoria" class="form-control">
                          <small style="color: red;display: none" id="lbl_create">* Este campo es requerido</small>
                      </div>
                  </div>
              </div>
          </div>
          <div class="modal-footer justify-content-between">
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
              <button type="button" class="btn btn-primary" id="btn_create">Guardar categoría</button>
          </div>
      </div>
      <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<script>
  $('#btn_create').click(function () {
     // alert("guardar");
      var nombre_categoria = $('#nombre_categoria').val();

      if(nombre_categoria == ""){
          $('#nombre_categoria').focus();
          $('#lbl_create').css('display','block');
      }else{
          var url = "../app/controllers/categorias/registro_de_categorias.php";
          $.get(url,{nombre_categoria:nombre_categoria},function (datos) {
              $('#respuesta').html(datos);
          });
      }
  });
</script>
<div id="respuesta"></div>



<!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
</body>
</html>
